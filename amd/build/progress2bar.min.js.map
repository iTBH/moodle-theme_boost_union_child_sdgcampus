{"version":3,"file":"progress2bar.min.js","sources":["../src/progress2bar.js"],"sourcesContent":["import jQuery from 'jquery';\nimport {call as fetchMany} from 'core/ajax';\nimport Templates from 'core/templates';\n\nexport const get_config = (configname) => fetchMany([{\n    methodname: 'theme_sdg_boost_union_config',\n    args: {\n        configname\n    }\n}])[0];\n\nexport const init = async() => {\n\n    let color = await get_config('progressbarcolorsetting');\n    let defaultColor = await get_config('defaultprogressbarcolorsetting');\n    let borderColor = '#27B049';\n    color = color ? \"background-color: \" + color.toString() + \" !important;\" : '';\n    defaultColor = defaultColor ? \"background-color: \" + defaultColor.toString() + \" !important;\" : '';\n\n    jQuery(window).ready(function () {\n        jQuery('.section.course-section').each(function (index) {\n\n            let activitycount = jQuery(this).find('.d-flex.ms-auto.align-items-center').last();\n\n            if (activitycount.length === 1) {\n                let info = activitycount.text().trim();\n                info = info.split(':')[1];\n                info = info.split('/');\n\n                let current = parseInt(info[0]);\n                let max = parseInt(info[1]);\n                let percentage = (current / max) * 100;\n\n                if (!isNaN(percentage)) {\n                    percentage = Math.round(percentage);\n                    let html = \"<div class='progress ms-auto' style='width:33%; height: 1.2rem; \" + defaultColor + \"; \" +\n                        \"border-radius: 0.75rem; border: 1px solid \" + borderColor + \";' \" +\n                        \"data-toggle='tooltip' data-placement='bottom' title='\" + percentage + \" %'>\" +\n                        \"<div class='progress-bar bg-success' role='progressbar' style='width: \" + percentage + \"%;\" +\n                        color + \"' aria-valuenow='\" + percentage + \"' aria-valuemin='0' aria-valuemax='100'>\" +\n                        \"</div>\" +\n                        \"</div>\";\n                    activitycount.parent().html(html);\n                }\n            }\n        });\n    });\n};\n"],"names":["get_config","configname","methodname","args","async","color","defaultColor","toString","window","ready","each","index","activitycount","this","find","last","length","info","text","trim","split","percentage","parseInt","isNaN","Math","round","html","parent"],"mappings":"0ZAIaA,WAAcC,aAAe,cAAU,CAAC,CACjDC,WAAY,+BACZC,KAAM,CACFF,WAAAA,eAEJ,gDAEgBG,cAEZC,YAAcL,WAAW,2BACzBM,mBAAqBN,WAAW,kCAEpCK,MAAQA,MAAQ,qBAAuBA,MAAME,WAAa,eAAiB,GAC3ED,aAAeA,aAAe,qBAAuBA,aAAaC,WAAa,eAAiB,uBAEzFC,QAAQC,OAAM,+BACV,2BAA2BC,MAAK,SAAUC,WAEzCC,eAAgB,mBAAOC,MAAMC,KAAK,sCAAsCC,UAE/C,IAAzBH,cAAcI,OAAc,KACxBC,KAAOL,cAAcM,OAAOC,OAChCF,KAAOA,KAAKG,MAAM,KAAK,GACvBH,KAAOA,KAAKG,MAAM,SAIdC,WAFUC,SAASL,KAAK,IAClBK,SAASL,KAAK,IACW,QAE9BM,MAAMF,YAAa,CACpBA,WAAaG,KAAKC,MAAMJ,gBACpBK,KAAO,mEAAqEpB,aAArE,8GAEmDe,WAFnD,6EAGoEA,WAAa,KACxFhB,MAAQ,oBAAsBgB,WAJvB,uDAOXT,cAAce,SAASD,KAAKA"}